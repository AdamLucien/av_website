<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>AV ¬∑ 13 mƒõs√≠c≈Ø</title>

  <!-- Assets -->
  <link rel="preload" href="./assets/site.css" as="style">
  <link rel="stylesheet" href="./assets/site.css">
  <script defer src="./assets/data.js"></script>
  <script defer src="./assets/app.js"></script>
  <script defer src="./assets/bg.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
  <link rel="icon" href="./assets/icons/favicon.svg" type="image/svg+xml">

  <style>
    /* --- Landing-only styles --- */
    .hero {
      position: relative; z-index: 1; min-height: 90svh;
      display: grid; place-items: center; text-align: center; padding: 24px;
    }
    .hero h1 {
      font-size: clamp(28px, 6.5vw, 50px);
      line-height: 1.15;
      margin-bottom: 12px;
      background: linear-gradient(90deg,#6ea1ff,#9bb8ff);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .hero p { font-size: clamp(16px, 3.5vw, 20px); color: var(--mut); margin: 8px 0 22px; }

    .section { position: relative; z-index: 1; padding: 28px 0; }
    .section h2 { margin-bottom: 10px; font-size: clamp(22px, 4.5vw, 28px); }
    .muted { color: var(--mut); }

    /* KPIs */
    .kpi-grid { display: grid; gap: 14px; grid-template-columns: 1fr 1fr; }
    @media (min-width: 900px){ .kpi-grid { grid-template-columns: repeat(4,1fr); } }
    .kpi-card { text-align: center; }
    .kpi-card b { display:block; font-size: clamp(20px, 5vw, 28px); margin-top: 8px; }

    /* Timeline */
    .tl { display:grid; gap:14px; }
    @media (min-width: 900px){ .tl { grid-template-columns: repeat(5,1fr); } }
    .tl .card { min-height: 140px; display:flex; flex-direction:column; gap:8px }

    /* Quote */
    .quote-card { text-align:center; font-size: clamp(18px, 4vw, 22px); line-height:1.6 }
    .type-cursor { display:inline-block; width:10px; height:1.1em; background:#e6e8f2; margin-left:4px; animation: blink 1s steps(2) infinite; vertical-align:-0.1em;}
    @keyframes blink { 50% { opacity: 0; } }

    /* Symbol */
    .symbol-card { text-align:center }
    .symbol-logo { width: min(360px, 70vw); margin: 6px auto 10px; display:block; }

    /* CTA with petals */
    .cta-roses { position: relative; overflow: hidden; }
    .petal { position:absolute; font-size: 22px; opacity:.75; animation:fall 9s linear infinite; pointer-events:none }
    @keyframes fall {
      0% { transform: translateY(-20svh) rotate(0deg); }
      100% { transform: translateY(110svh) rotate(380deg); }
    }
    .cta-actions { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:12px }

    /* Parallax helpers */
    [data-parallax] { will-change: transform; }
  </style>
</head>
<body>
  <!-- HERO -->
  <section class="hero section">
    <div class="container">
      <h1 id="h1" data-parallax></h1>
      <p id="p" class="muted" data-parallax></p>
      <a id="cta" href="rain-story/index.html" class="btn" data-parallax></a>
    </div>
  </section>

  <!-- KPIs -->
  <section class="section">
    <div class="container">
      <h2 id="kpiTitle"></h2>
      <div class="kpi-grid">
        <div class="card kpi-card">
          <div class="muted">Zpr√°v celkem</div>
          <b id="k_total">‚Äì</b>
          <div class="caption">N√°≈° jazyk bl√≠zkosti.</div>
        </div>
        <div class="card kpi-card">
          <div class="muted">M√©dia</div>
          <b id="k_media">‚Äì</b>
          <div class="caption">Kdy≈æ slova nestaƒç√≠.</div>
        </div>
        <div class="card kpi-card">
          <div class="muted">Tempo odpovƒõdi</div>
          <b id="k_reply">‚Äì</b>
          <div class="caption">Rychl√© reakce, otev≈ôen√© srdce.</div>
        </div>
        <div class="card kpi-card">
          <div class="muted">Nejdel≈°√≠ ticho</div>
          <b id="k_gap">‚Äì</b>
          <div class="caption">Ticho ‚â† konec. N√°vrat je volba.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- TIMELINE: momenty -->
  <section class="section">
    <div class="container">
      <h2 id="momentsTitle"></h2>
      <div class="tl">
        <div class="card" data-parallax>
          <div class="muted">3. 9. 2024</div>
          <div id="m1">‚Äû–ö–æ—Ö–∞—é —Ç–µ–±–µ –±–µ–∑–º–µ–∂–Ω–æ üòò‚Äú</div>
        </div>
        <div class="card" data-parallax>
          <div class="muted">3. 9. 2024</div>
          <div id="m2">‚ÄûM√° l√°sko üíó‚Äú</div>
        </div>
        <div class="card" data-parallax>
          <div class="muted">6.‚Äì12. 12. 2024</div>
          <div id="m3">Ticho. Ne konec. Pauza, po kter√© jsme si znovu vybrali n√°s.</div>
        </div>
        <div class="card" data-parallax>
          <div class="muted">15.‚Äì20. 2. 2025</div>
          <div id="m4">Druh√° zkou≈°ka. Vydr≈æeli jsme.</div>
        </div>
        <div class="card" data-parallax>
          <div class="muted">13. 9. 2025</div>
          <div id="m5">13 mƒõs√≠c≈Ø. Po≈ô√°d ‚Äûspolu‚Äú.</div>
        </div>
      </div>
    </div>
  </section>

  <!-- QUOTE -->
  <section class="section">
    <div class="container">
      <div class="card quote-card" data-parallax>
        <span id="quote"></span><span class="type-cursor"></span>
      </div>
    </div>
  </section>

  <!-- SYMBOL (logo + v√Ωznam) -->
  <section class="section">
    <div class="container">
      <h2 id="symbolTitle"></h2>
      <div class="card symbol-card" data-parallax>
        <!-- Vymƒõ≈à src za svoje fin√°ln√≠ logo -->
        <img class="symbol-logo" src="./assets/icons/favicon.svg" alt="AV logo">
        <p id="symbolCopy" class="muted" style="margin-top:8px"></p>
      </div>
    </div>
  </section>

  <!-- CTA ROSES -->
  <section class="section cta-roses">
    <div class="container card" style="text-align:center" data-parallax>
      <h2 id="ctaFinalTitle">SPOLU.</h2>
      <div class="cta-actions">
        <a class="btn" href="rain-story/index.html">D√©≈°≈• n√°s spojil</a>
        <a class="btn" href="stats/index.html">Velk√© statistiky</a>
        <a class="btn" href="letter/index.html">Dopis</a>
        <a class="btn" href="roses/index.html">R≈Ø≈æe</a>
        
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <div class="footer">
    ¬© 2025 AV ¬∑ 13 mƒõs√≠c≈Ø spolu
  </div>

  <script>
    // --- Helpers ---
    function animateCounter(el, to, duration=900, fmt=v=>v.toLocaleString('cs-CZ')) {
      const start = performance.now(), from = 0;
      function tick(t){
        const p = Math.min(1, (t - start)/duration);
        el.textContent = fmt(Math.floor(from + (to - from) * (p*p*(3-2*p)))); // smoothstep
        if (p < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    function typewriter(el, text, speed=18) {
      let i = 0;
      function step(){
        el.textContent = text.slice(0, i++);
        if (i <= text.length) setTimeout(step, speed);
      }
      step();
    }

    // Parallax on scroll (subtle)
    const parallaxNodes = [];
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('[data-parallax]').forEach(n => parallaxNodes.push(n));
    });
    addEventListener('scroll', () => {
      const y = scrollY || pageYOffset;
      parallaxNodes.forEach((n, idx) => {
        const factor = 0.05 + (idx % 3) * 0.02;
        n.style.transform = `translate3d(0, ${y*factor}px, 0)`;
      });
    }, {passive:true});

    // Petals in CTA
    function spawnPetals(container, count=16) {
      const area = container.getBoundingClientRect();
      for (let i=0;i<count;i++){
        const s = document.createElement('div');
        s.className = 'petal';
        s.textContent = 'üåπ';
        s.style.left = (Math.random()*96)+'vw';
        s.style.animationDelay = (Math.random()*6)+'s';
        s.style.opacity = (0.45 + Math.random()*0.55).toFixed(2);
        container.appendChild(s);
        setTimeout(()=> s.remove(), 9000);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      const t = UX.t;

      // Hero texts
      h1.textContent  = t(NDATA.copy.cs.landing_h1, NDATA.copy.ua.landing_h1);
      p.textContent   = t(NDATA.copy.cs.landing_p,  NDATA.copy.ua.landing_p);
      cta.textContent = t(NDATA.copy.cs.cta_start,  NDATA.copy.ua.cta_start);

      // KPI title
      const kpiTitle = document.getElementById('kpiTitle');
      kpiTitle.textContent = t('Na≈°e ƒç√≠sla, n√°≈° jazyk','–ù–∞—à—ñ —á–∏—Å–ª–∞ ‚Äî –Ω–∞—à–∞ –º–æ–≤–∞');

      // Counters
      animateCounter(document.getElementById('k_total'), NDATA.totals.all_incl_media || 0);
      const mediaVal = (NDATA.media.images||0) + (NDATA.media.videos||0);
      animateCounter(document.getElementById('k_media'), mediaVal);
      const replySec = Math.round(((NDATA.replies?.median_sec_you||0)+(NDATA.replies?.median_sec_her||0))/2) || '‚Äì';
      document.getElementById('k_reply').textContent = replySec === '‚Äì' ? '‚Äì' : (replySec+' s');
      const gapH = (NDATA.gaps && NDATA.gaps[0]) ? NDATA.gaps[0].hours : 0;
      document.getElementById('k_gap').textContent = gapH ? (gapH.toFixed(1)+' h') : '‚Äì';

      // Moments section localized
      document.getElementById('momentsTitle').textContent = t('Na≈°e momenty','–ù–∞—à—ñ –º–æ–º–µ–Ω—Ç–∏');
      document.getElementById('m1').textContent = t('‚Äû–ö–æ—Ö–∞—é —Ç–µ–±–µ –±–µ–∑mezÃåneÃå üòò‚Äú ‚Äì poprv√© to zaznƒõlo.','¬´–ö–æ—Ö–∞—é —Ç–µ–±–µ –±–µ–∑–º–µ–∂–Ω–æ üòò¬ª ‚Äî –≤–ø–µ—Ä—à–µ —Ü–µ –ø—Ä–æ–∑–≤—É—á–∞–ª–æ.');
      document.getElementById('m2').textContent = t('‚ÄûM√° l√°sko üíó‚Äú','¬´–ú–æ—î –∫–æ—Ö–∞–Ω–Ω—è üíó¬ª');
      document.getElementById('m3').textContent = t('Ticho. Ne konec. Pauza, po kter√© jsme si znovu vybrali n√°s.','–¢–∏—à–∞. –ù–µ –∫—ñ–Ω–µ—Ü—å. –ü–∞—É–∑–∞, –ø—ñ—Å–ª—è —è–∫–æ—ó –º–∏ –∑–Ω–æ–≤—É –≤–∏–±—Ä–∞–ª–∏ –Ω–∞—Å.');
      document.getElementById('m4').textContent = t('Druh√° zkou≈°ka. Vydr≈æeli jsme.','–î—Ä—É–≥–µ –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è. –ú–∏ –≤–∏—Ç—Ä–∏–º–∞–ª–∏.');
      document.getElementById('m5').textContent = t('13 mƒõs√≠c≈Ø. Po≈ô√°d ‚Äûspolu‚Äú.','13 –º—ñ—Å—è—Ü—ñ–≤. –î–æ—Å—ñ ¬´—Ä–∞–∑–æ–º¬ª.');

      // Quote typewriter
      const q = t('‚ÄûNa≈°el jsem v tobƒõ klid v bou≈ôi.‚Äú','¬´–Ø –∑–Ω–∞–π—à–æ–≤ —É —Ç–æ–±—ñ —Å–ø–æ–∫—ñ–π —É –±—É—Ä—ñ.¬ª');
      typewriter(document.getElementById('quote'), q, 20);

      // Symbol copy
      document.getElementById('symbolTitle').textContent = t('N√°≈° symbol','–ù–∞—à —Å–∏–º–≤–æ–ª');
      document.getElementById('symbolCopy').textContent = t(
        '≈†t√≠t s korunou, drakem a jednoro≈æcem. ‚ÄûAV‚Äú s 7+7 l√≠stky: ka≈æd√© ‚Äûano‚Äú je kvƒõt.',
        '–©–∏—Ç –∑ –∫–æ—Ä–æ–Ω–æ—é, –¥—Ä–∞–∫–æ–Ω–æ–º —ñ —î–¥–∏–Ω–æ—Ä–æ–≥–æ–º. ¬´AV¬ª –∑ 7+7 –ø–µ–ª—é—Å—Ç–∫–∞–º–∏: –∫–æ–∂–Ω–µ ¬´—Ç–∞–∫¬ª ‚Äî —è–∫ –∫–≤—ñ—Ç.'
      );

      // CTA petals
      const ctaSection = document.querySelector('.cta-roses');
      spawnPetals(ctaSection, 22);
      // light confetti on bottom arrival
      let fired = false;
      addEventListener('scroll', ()=> {
        if (fired) return;
        const rect = ctaSection.getBoundingClientRect();
        if (rect.top < innerHeight && rect.bottom <= innerHeight + 120){
          fired = true; spawnPetals(ctaSection, 32);
        }
      }, {passive:true});
    });
  </script>
</body>
</html>